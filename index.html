<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-do application</title>
</head>
<body>
    <input id="text" type="text" placeholder="todo description here">
    <input type="button" value="add todo" onclick="buttonClickHandler()">
    <ul id="todo">
        <li id="empty"><em>No todos added to the list</em></li>
    </ul>

    <script>
        // this is the DOM container containing the list items
        // represented by the <ul> element in HTML
        const nodeTodoList = document.querySelector("ul#todo");

        // this is the constant storing the DOM node for the
        // todo item placeholder when empty
        const nodeEmpty = document.querySelector("li#empty");

        // show-hide the empty placeholder item
        function toggleEmptyItem(visible) {
            nodeEmpty.style.display = 
                visible ? "list-item" : "none";
        }

        // this function is supposed to "smartly" show or
        // hide the placeholder, depending on whether the list
        // todos is empty or not. This is needed when a first
        // todo item is added to the list, and when a last
        // todo item is removed.
        function updateEmptyItem() {
            // in the current implementation, it does it right
            // only when the first todo item is added
            toggleEmptyItem(false);
        }

        // this is the click handler for actual todo items
        function itemClickHandler(event) {
            const thisItem = event.currentTarget;

            // actually remove the node from the DOM
            thisItem.remove();

            // show/hide placeholder as necessary
            updateEmptyItem();
        }

        function buttonClickHandler() {
            const nodeTextInput = document.querySelector("input#text");

            // add todo
            addTodo(nodeTextInput.value);

            // show/hide placeholder as necessary
            updateEmptyItem();
        }

        // adds a todo list
        function addTodo(text) {
            nodeTodoList.innerHTML += `
                <li onclick="itemClickHandler(event)">${text}</li>`;
        }
    </script>
</body>
</html>